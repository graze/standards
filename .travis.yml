language: php
dist: trusty
cache:
  directories:
  - "$HOME/.composer/cache/files"
php:
  - 5.5
  - 5.6
  - 7.0
  - 7.1
  - 7.2
  - hhvm
  - nightly

matrix:
  fast_finish: true
before_install:
- sudo apt-get update
- sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
before_script:
- travis_retry composer update --no-interaction
- mkdir -p cache
script:
- vendor/bin/phpcs -p --warning-severity=0 --cache=cache/phpcs --parallel=10 PHP/
  examples/

jobs:
  include:
    - stage: deploy
      php: 7.1
      script: make docs-deploy
